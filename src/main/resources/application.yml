server:
  port: ${PORT:8080}
  servlet:
    context-path: /api

spring:
  application:
    name: Aerotickets
  config:
    import: >
      optional:file:.env.${spring.profiles.active}.properties,
      optional:file:.env.properties
  jpa:
    open-in-view: false
    show-sql: false
  mail:
    host: smtp.gmail.com
    port: 587
    username: ${GMAIL_USER}
    password: ${GMAIL_APP_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
    default-encoding: UTF-8

jwt:
  secret: ${JWT_SECRET}
  expiration-minutes: ${JWT_EXPIRATION_MINUTES:120}

cors:
  # Para local: front en Vite
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:5173}

logging:
  file:
    name: logs/aerotickets.log
  level:
    root: INFO
    com.aerotickets: DEBUG
    org.springframework.security: INFO
    org.springframework.web: INFO
    org.hibernate.SQL: WARN
  pattern:
    console: "%clr(%d{yyyy-MM-dd HH:mm:ss}){faint} | %clr(%-5level){cyan} | %clr(%logger{36}){blue} | %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} | %logger{36} | %msg%n"

management:
  endpoints:
    web:
      base-path: /actuator
      exposure:
        include: health,info,mappings
  endpoint:
    health:
      show-details: when_authorized
    mappings:
      enabled: true
  health:
    defaults:
      enabled: true

external:
  apis:
    airlabs:
      base-url: ${AIRLABS_BASE_URL:https://airlabs.co/api/v9}
      api-key: ${AIRLABS_API_KEY:}

app:
  mail:
    from: ${APP_MAIL_FROM:no-reply@aerotickets.com}
  frontend:
    # En prod, esto deber√≠a ser el dominio REAL de tu frontend (lo sobreescribes con APP_FRONTEND_BASE_URL)
    base-url: ${APP_FRONTEND_BASE_URL:http://localhost:5173}

email:
  provider: ${EMAIL_PROVIDER:gmail}

sendgrid:
  api-key: ${SENDGRID_API_KEY:}

stripe:
  # Estas dos claves DEBEN sobrescribirse con variables de entorno en prod
  public-key: ${STRIPE_PUBLIC_KEY:pk_test_dummy}
  secret-key: ${STRIPE_SECRET_KEY:sk_test_dummy}

  # Moneda por defecto
  currency: ${STRIPE_CURRENCY:cop}

  # Si no defines STRIPE_SUCCESS_URL / STRIPE_CANCEL_URL:
  #  - usa app.frontend.base-url + /pagos/success o /pagos/cancel
  # AJUSTA estas rutas a las que tenga tu frontend
  success-url: ${STRIPE_SUCCESS_URL:${app.frontend.base-url}/pagos/success}
  cancel-url: ${STRIPE_CANCEL_URL:${app.frontend.base-url}/pagos/cancel}